<sly data-sly-use.meta="com.mcd.rwd.global.core.sightly.page.PageMeta"/>
<sly data-sly-use.twitterStreamHandler="com.mcd.rwd.wifi.core.sightly.TwitterStreamHandler">
   <input type="hidden" id="tweets" value="${twitterStreamHandler.getJsonTweets}" />
</sly>
<div data-ng-controller="twitterCtrl" data-ng-cloak>
   <div tabindex='0' class="grid-item socialTile-twitter" style="overflow: hidden;" data-mode="carousel" data-start-now="false" data-repeat='0'>
      <div data-ng-repeat="item in data">
         <div class="media">
            <a href="#socialpopupTwitter" title="{{item.text}}" role="button" data-toggle="modal" class="open-popup-twitter twitterBox" target="_blank" style="color: #fff" data-at="BigImg:${meta.title @ context = 'unsafe'}:{{item.id_str}}" data-track="twImg">
               <img data-ng-if="item.extended_entities.media[0].media_url_https" data-ng-src="{{item.extended_entities.media[0].media_url_https}}" alt="{{item.text}}">
               <img data-ng-if="!item.extended_entities.media[0].media_url_https" src="${twitterStreamHandler.imagePath}" alt="${twitterStreamHandler.altText}" />
               <video class="videoTag" data-show={{trustSrc(getVideoFormat(item.extended_entities.media[0].video_info.variants))}} style="display: none">
                  <source data-ng-src="{{trustSrc(getVideoFormat(item.extended_entities.media[0].video_info.variants))}}" type="video/mp4">
               </video>
               <span class="screen-reader-text">Open Twitter Modal</span>
            </a>
         </div>
         <div class="tweetContent">
            <div class="tweetHeader">
               <a data-ng-href="https://twitter.com/{{item.user.screen_name}}" target="_blank" title="{{item.user.screen_name}}" x-cq-linkchecker="skip">
                  <span class="tweetAvatar">
                  <img data-ng-src="{{item.user.profile_image_url_https}}" alt="{{item.user.name}} Twitter">
                  </span>
                  <span class="tweetAuthor">
                  <span class="link" aria-hidden="true">{{item.user.name}}</span>
                  <span data-ng-show="item.user.verified" title="Verified account" class="verifyAccount"></span><br>
                  <span class="title">@{{item.user.screen_name}}</span>
                  </span>
                  <span class="tweetIcon">
                  <i class="twitter-color fa fa-twitter fa-5"></i>
                  </span>
                  <span class="screen-reader-text">{{item.user.name}} Twitter</span>
                  <div class="clearfix"></div>
               </a>
            </div>
            <p class="urlText">
               <span class="urlTextData">{{item.text}}</span>
               <span class="mentions hidden">{{getMentions(item.entities.user_mentions)}}</span>
               <span class="hastags hidden">{{getHashTag(item.entities.hashtags)}}</span>
            </p>
            <div class="twitterIcons">
               <div class="pull-left ins-twt-PostedBox" aria-label="${twitterStreamHandler.timeStamp} {{item.created_at | dateFilter}}" tabindex="0">
                  <span class="hrs">
                  <i class="fa fa-twitter"></i>{{item.created_at | dateFilter | hrsSplit:' ':0}}<em class="ins-twt-Posted">{{item.created_at | dateFilter | hrsSplit:' ':1}}</em>                    
                  </span>
               </div>
               <div class="pull-right">
                  <a data-ng-href="http://twitter.com/intent/tweet?lang=en&amp;in_reply_to={{item.id_str}}" title="${twitterStreamHandler.replyTitle}" class="reply fa fa-reply" target="_blank" data-at="Reply:${meta.title @ context = 'unsafe'}:{{item.id_str}}" data-track="twReply"><span class="screen-reader-text">${twitterStreamHandler.replyTitle}</span></a>
                  <a data-ng-href="http://twitter.com/intent/retweet?lang=en&amp;tweet_id={{item.id_str}}" title="${twitterStreamHandler.retweetTitle}" class="reply fa fa-retweet" target="_blank" data-at="ReTweet:${meta.title @ context = 'unsafe'}:{{item.id_str}}" data-track="twRetweet"><span class="screen-reader-text">${twitterStreamHandler.retweetTitle}</span></a>
                  <a data-ng-href="http://twitter.com/intent/favorite?lang=en&amp;tweet_id={{item.id_str}}" title="${twitterStreamHandler.likeTitle}" class="reply fa fa-heart" target="_blank" data-at="Like:${meta.title @ context = 'unsafe'}:{{item.id_str}}" data-track="twLike"><span class="screen-reader-text">${twitterStreamHandler.likeTitle}</span></a>
               </div>
               <div class="clearfix"></div>
            </div>
         </div>
      </div>
   </div>
</div>
<sly data-sly-test="${!twitterStreamHandler.getUsername}">
   <h2>Please configure the Twitter Component</h2>
</sly>
<div id="socialpopupTwitter" class="modal fade twitterModal" role="dialog" tabindex="-1">
   <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content ">
         <div class="modal-header">
            <button type="button" class="close" aria-label="Close" title="Close" data-dismiss="modal">&times;</button>
            <div class='tweetHeader'></div>
            <div class="clearfix"></div>
         </div>
         <div class="modal-body">
            <div class="content"></div>
         </div>
         <div class="modal-footer"></div>
      </div>
   </div>
</div>